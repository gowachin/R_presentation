<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Science Reproductible avec  </title>
    <meta charset="utf-8" />
    <meta name="author" content="Maxime Jaunatre" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Science Reproductible avec <svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M100.59 334.24c48.57 3.31 58.95 2.11 58.95 11.94 0 20-65.55 20.06-65.55 1.52.01-5.09 3.29-9.4 6.6-13.46zm27.95-116.64c-32.29 0-33.75 44.47-.75 44.47 32.51 0 31.71-44.47.75-44.47zM448 80v352a48 48 0 0 1-48 48H48a48 48 0 0 1-48-48V80a48 48 0 0 1 48-48h352a48 48 0 0 1 48 48zm-227 69.31c0 14.49 8.38 22.88 22.86 22.88 14.74 0 23.13-8.39 23.13-22.88S258.62 127 243.88 127c-14.48 0-22.88 7.84-22.88 22.31zM199.18 195h-49.55c-25-6.55-81.56-4.85-81.56 46.75 0 18.8 9.4 32 21.85 38.11C74.23 294.23 66.8 301 66.8 310.6c0 6.87 2.79 13.22 11.18 16.76-8.9 8.4-14 14.48-14 25.92C64 373.35 81.53 385 127.52 385c44.22 0 69.87-16.51 69.87-45.73 0-36.67-28.23-35.32-94.77-39.38l8.38-13.43c17 4.74 74.19 6.23 74.19-42.43 0-11.69-4.83-19.82-9.4-25.67l23.38-1.78zm84.34 109.84l-13-1.78c-3.82-.51-4.07-1-4.07-5.09V192.52h-52.6l-2.79 20.57c15.75 5.55 17 4.86 17 10.17V298c0 5.62-.31 4.58-17 6.87v20.06h72.42zM384 315l-6.87-22.37c-40.93 15.37-37.85-12.41-37.85-16.73v-60.72h37.85v-25.41h-35.82c-2.87 0-2 2.52-2-38.63h-24.18c-2.79 27.7-11.68 38.88-34 41.42v22.62c20.47 0 19.82-.85 19.82 2.54v66.57c0 28.72 11.43 40.91 41.67 40.91 14.45 0 30.45-4.83 41.38-10.2z"></path></svg>
## slides : <a href="https://tinyurl.com/ycktp4kv">tinyurl.com/ycktp4kv</a>
### Maxime Jaunatre
### UMR AMURE | IFREMER
### 2022-05-05 (updated: 2022-05-02)

---







exclude: true

class: inverse, center, middle

# Introduction

---
exclude: true

# Utilisation de Git dans un travail avec R

**Résumé :** 

---

background-image: url(./CSU_RepRo_files/figure-html/phd101212s.png)
background-size: contain

# Pourquoi utiliser un CVS ?

???

Le travail de recherche est de nature incrémentielle et oblige l'accumulation de versions différentes. Cela devient vite compliqué de s'y retrouver.

---
exclude:true

# Pourquoi utiliser un CVS ?

Est-ce que vous avez déjà :

- **Fait un changement de code et voulu revenir en arrière ?**
- **Perdu du code ou une sauvegarde trop ancienne ?**
- Voulu voir la difference entre 2 versions ?
- Voulu vérifier l'historique d'un script ?
- **Voulu travailler sur un script a plusieurs ?**
- **Voulu partager votre code à quelqu'un ?**
- Voulu tester une nouveauté sans modifier du code déjà utile ?

Si oui, et dans plein de cas, un système de version control aurait pu vous simplifier la vie.

???

Diapo dite à l'orale avec le comic suivant.

---
# Pourquoi utiliser un CVS ?

&lt;img src="Tuto_git_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;


???

Comparaison entre un historique "classique" et un historique avec git. Le nom de fichier n'est plus modifié et est donc plus facilement trouvable.

---
# Garder un historique avec Git

## Qu'est-ce qu'un commit ?

On a vu qu'il s'agit d'un snapshot, mais il contient plus de meta-données !

.pull-left[

- Liste des fichiers édités

- Différences de lignes édites

- Commit précédent (parent)
]

.pull-right[
- Auteur et email

- Date

- Message
]

???

Git enregistre que les lignes différentes donc c'est utile pour versionner des fichiers un peu brutes, de types code,c csv ou ou svg. Les images changent à chaque fois (comme les pdfs !)

Commit précédent -&gt; notion d'arbre et d'historique !

--

Et un HASH (ou SHA) (identifiant unique) 

**&lt;u&gt;a64bc14&lt;/u&gt;da18e47629e62b8e54d33d429c4b824e0**

La partie soulignée suffit le plus souvent.

---
# Garder un historique avec Git

## Anatomie d'un commit : git log

On peut retrouver le log de tout l'historique comme cela dans la console.


```bash
$ git log
```

Example :


```bash
commit f36044df028b44352c293bafb0d6016b666c09c0
Author: Maxime &lt;gowachin@gmail.com&gt;
Date:   Sun Nov 21 22:30:43 2021 +0100

    Time of deco stop near MN90 values

    Values are very close to MN90 tables, error should be due to different
    number and half life of compartments.
    Require to think how to set this in nice function so we can use them to
    plan dives but also represent saturations in later graphs !

```

---
# Garder un historique avec Git

&lt;img src="CSU_RepRo_files/figure-html/commit_mess.png" width="85%" style="display: block; margin: auto;" /&gt;

.footnote[
xkcd comics, [CC BY-NC 2.5 license](https://xkcd.com/license.html)
]

???

De l'utilité de mettre un commentaire qui fait sens.

---
exclude:true
# Garder un historique avec Git

## Git aide à comprendre l'historique.

Principe de **snapshot**, nommés **commit** dans git.

&lt;img src="Tuto_git_files/figure-html/files.png" width="100%" style="display: block; margin: auto;" /&gt;

&lt;img src="Tuto_git_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;


---

class: inverse, center, middle

# Exercice 1 : un fichier local

---
# Config git account !

Dans le terminal de commande Git Bash :


```bash
$ git config --global user.name 'Maxime Jaunatre'
$ git config --global user.email 'gowachin@gmail.com'
$ git config --global --list
```

Cela remplace votre nom et mail associé à votre compte github.

On peut aussi utiliser le package usethis dans la console R :


```r
## install if needed (do this exactly once):
## install.packages("usethis")
library(usethis)
use_git_config(user.name = "Maxime Jaunatre", 
               user.email = "gowachin@gmail.com")
```

---
# Initier git

## Créer un nouveau dossier (projet Rstudio)

Avec le terminal de commande Git Bash :


```bash
$ cd 
$ git init tuto_git
Initialized empty Git repository in path/to/your/directory/tuto/.git/

```

Avec Github Desktop (GHD) : File &gt; New Repository &gt; Type name &gt; Create repository

Avec Rstudio : File &gt; New Directory &gt; R project &gt; Type name + cocher "Create git repository"

---
# Initier git

## On peut aussi ajouter git à un projet existant

Avec le terminal de commande Git Bash :


```bash
$ cd path/to/directory
$ git init
Initialized empty Git repository in path/to/your/directory/tuto/.git/
```

Avec une commande R : 


```r
usethis::use_git()
# Lire ce qui se dit dans la console.
```

Avec Github Desktop (GHD) : File &gt; New Repository &gt; Type name &gt; Create repository

Avec Rstudio : Tools &gt; Project Options … &gt; Git/SVN. Under “Version control system”, choisir “Git”. Confirm New Git Repository? Oui!


???

Globalement la même chose mais à partir d'un dossier existant.


---
# Créer un fichier et l'ajouter à Git

On va créer un fichier (.Rmd). Je propose que ce soit votre fichier de notes pour la session. 

On va le nommer `Notes_Maxime.Rmd`. Je vous laisse noter quelques mots dedans histoire d'avoir un fichier remplis.

Une fois le fichier sauvegardé (Ctrl+S), **git** va observer la modification !

Vérifier cela dans l'onglet Git ou alors dans le terminal de commande :


```bash
$ git status
```

On peut aussi voir ça dans l'onglet Git qui indique une petit *A* à côté de notre fichier.

???

On peut régler Rstudio pour qu'il montre le terminal git bash ! Et ça c'est pratique


---
# Premier commit

On peut faire notre premier commit !!!
Cela se passe en 2 étapes : ajouter les fichiers à l'index et faire le commit.

.pull-left[

**Git Bash**


```bash
$ git add Notes_Maxime.Rmd
$ git commit
```

Cela va ouvrir un éditeur de texte ! (Vim par défaut). On peut écrire ce qu'on veut ici.
]

.pull-right[

**R**


```r
usethis::use_git(
  message = "Initial commit"
  )
```

Ne permet pas d'être très précis.
]

.pull-left[
**GHD**

* Cliquer sur Changes

* Cocher la case à gauche

* Ecrire le commit
]

.pull-right[
**Rstudio**

* Cliquer sur Commit

* Cocher la case *Staged*

* Ecrire le commit
]


???

Tab permet l'auto completion des noms de fichiers !

---
# Répéter l'opération

On peut maintenant modifier le fichier et recommencer :

**Editer -&gt; Sauvegarder -&gt; Ajouter à l'index -&gt; Commit**

--

On peut vérifier l'état avec *Diff* et l'historique avec *log*

.pull-left[

**Git Bash**


```bash
$ git status
$ git diff
$ git log
```
]

.pull-right[

**R**

Pour une fois que R ne fait pas tout...
]

.pull-left[
**GHD**

* Status -&gt; Changes

* log -&gt; History
]

.pull-right[
**Rstudio**

* Status -&gt; Diff

* log -&gt; icone Horloge
]

On va faire quelques commits... Ajoutez des fichiers pour tester !

---

class: inverse, center, middle

# Exercice 2 : plusieurs fichiers locaux


---
# Multiples fichiers !

## Git peut inclure plusieurs fichiers dans un commit.

A vous de tester les différents cas suivants :

.pull-left[

* Ajouter des fichiers

* Supprimer un fichier
]

.pull-right[

* Renommer un fichier

* Déplacer un fichier dans un dossier
]

--

## Cas spécial : ignore un fichier

Il est parfois important de ne pas suivre un fichier avec Git. Pour cela on utilise le **.gitignore**

.pull-left[
**Git Bash**

```bash
$ vim .gitignore
```
]

.pull-right[
**Rstudio**

* Nouveau fichier txt nommé
]


```bash
./*.csv
./*.Rproj
./*.html
```


---

class: inverse, center, middle

# Partie 2: Github et dépôts distants


---

# Travailler à plusieurs

&lt;img src="Tuto_git_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;

---
exclude: true

# Git : comment ça marche ?

## 3 commandes à retenir : commit, push, and pull

- commit: enregistre une snapshot du code à un certain point temporel. 
&lt;br/&gt;(permet d'associer du texte pour expliquer les modifications)



```r
knitr::include_graphics("CSU_RepRo_files/figure-html/git_tab.png")
```

???

Installation de git sur l'ordinateur et initialisation de dépots dans un dossier
rejoint la notion de compendium (un projet = un dépot git = un dossier)

commit permet un enregistrement d'une étape temporelle pour les fichiers textes
permet de travailler sur tout fichier texte simple (md, tex, R, code...)

Important de bien nommer ses commits pour se retrouver temporellement

--
exclude: true

- pull: met a jour le projet local avec la dernière version du projet&lt;sup&gt;*&lt;/sup&gt;

- push: met en commun les modifications locales avec le projet principal&lt;sup&gt;*&lt;/sup&gt;

.footnote[
[*] Si herbergé en ligne.
]

???

Important : git est indépendant de github et peut s'utiliser en solitaire.
pull et push permet de mettre à jour un dépot par rapport à un autre, 
souvent en ligne.




---
exclude: false

# Ressources Git

.pull-left[

- [Tutoriel ThinkR : R and Git](https://thinkr.fr/travailler-avec-git-via-rstudio-et-versionner-son-code/)

- [Advance R &amp;#x1F4D4;, H. Wickham](http://r-pkgs.had.co.nz/git.html)

- [Happy Git and GitHub for the useR](http://happygitwithr.com/)

- [Git cheatsheet](https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf)

- [Quand ça part en vrille](https://github.com/k88hudson/git-flight-rules)

- [Réparer une erreur](http://ohshitgit.com/)

- [Créer une nouvelle branche avec git et merge des branches](https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches)
]

.pull-right[
&lt;img src="Tuto_git_files/figure-html/git.png" width="90%" style="display: block; margin: auto;" /&gt;
]

.footnote[
xkcd comics, [CC BY-NC 2.5 license](https://xkcd.com/license.html)
]

???

Beaucoup d'information est disponible.
Encore une fois, il vaut mieux commencer sur un petit projet où l'on est à l'aise.

---
class: inverse, center, middle

# Merci! Des questions &amp;#x2753;

Slides en ligne [https://gowachin.github.io/R_presentation/Tuto_git.html](https://tinyurl.com/ycktp4kv)

[Fichiers source &lt;svg viewBox="0 0 581 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://github.com/gowachin/R_presentation) &amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp; [Fichier pdf &lt;svg viewBox="0 0 384 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm250.2-143.7c-12.2-12-47-8.7-64.4-6.5-17.2-10.5-28.7-25-36.8-46.3 3.9-16.1 10.1-40.6 5.4-56-4.2-26.2-37.8-23.6-42.6-5.9-4.4 16.1-.4 38.5 7 67.1-10 23.9-24.9 56-35.4 74.4-20 10.3-47 26.2-51 46.2-3.3 15.8 26 55.2 76.1-31.2 22.4-7.4 46.8-16.5 68.4-20.1 18.9 10.2 41 17 55.8 17 25.5 0 28-28.2 17.5-38.7zm-198.1 77.8c5.1-13.7 24.5-29.5 30.4-35-19 30.3-30.4 35.7-30.4 35zm81.6-190.6c7.4 0 6.7 32.1 1.8 40.8-4.4-13.9-4.3-40.8-1.8-40.8zm-24.4 136.6c9.7-16.9 18-37 24.7-54.7 8.3 15.1 18.9 27.2 30.1 35.5-20.8 4.3-38.9 13.1-54.8 19.2zm131.6-5s-5 6-37.3-7.8c35.1-2.6 40.9 5.4 37.3 7.8z"&gt;&lt;/path&gt;&lt;/svg&gt;](https://github.com/gowachin/R_presentation/raw/main/Tuto_git.pdf)

&lt;svg viewBox="0 0 496 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt; [gowachin](https://github.com/gowachin) &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;svg viewBox="0 0 384 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"&gt;&lt;/path&gt;&lt;/svg&gt; [gowachin](https://stackoverflow.com/users/12501379/gowachin)

.footnote[
Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
